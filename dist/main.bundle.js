"use strict";(self.webpackChunkjs_capstone_project=self.webpackChunkjs_capstone_project||[]).push([[179],{426:(n,e,t)=>{t.d(e,{Z:()=>s});var a=t(81),r=t.n(a),o=t(645),i=t.n(o)()(r());i.push([n.id,"* {\n  padding: 0;\n  margin: 0;\n}\n\nbody {\n  position: relative;\n  min-height: 100vh;\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.header,\n.footer {\n  width: 100%;\n  height: 50px;\n  background-color: lightblue;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  justify-content: right;\n  font-weight: 700;\n}\n\n.header ul {\n  margin-right: 12px;\n  display: flex;\n  justify-content: right;\n  list-style-type: none;\n}\n\n.header li {\n  padding: 0 12px;\n  margin-right: 12px;\n}\n\n.header a {\n  padding: 12px 15px;\n  border-radius: 5px;\n  text-decoration: none;\n  color: rgb(24, 24, 23);\n}\n\n.footer a {\n  text-decoration: none;\n  color: black;\n  font-weight: 600;\n  font-style: italic;\n}\n\n.header a:hover {\n  background-color: lightgray;\n  color: black;\n  border: black solid 2px;\n}\n\n#parent {\n  margin: 24px 0;\n  display: grid;\n  grid-template-columns: 200px 200px 200px 200px;\n  column-gap: 24px;\n  justify-content: center;\n  font-family: sans-serif;\n}\n\n#like i {\n  margin-top: 5px;\n  text-align: right;\n  color: red;\n}\n\n.name {\n  display: flex;\n  align-items: center;\n  margin: 12px;\n}\n\n.no-of-likes {\n  font-size: 11px;\n  padding: 5px 0;\n  text-align: right;\n}\n\n.card {\n  display: flex;\n  justify-content: center;\n  margin: 12px;\n  border-radius: 5px;\n}\n\n.card-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #a393eb;\n  border: gray solid 1px;\n  border-radius: 5px;\n  color: #2b2a2a;\n  font-family: Arial, sans-serif;\n}\n\n#show-image {\n  width: 180px;\n  height: 200px;\n  margin: 5px;\n}\n\n.name-like-parent {\n  width: 100%;\n  height: 50px;\n  display: flex;\n  justify-content: space-between;\n  background-color: aquamarine;\n}\n\n.like-parent {\n  width: 50px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-right: 12px;\n}\n\n.comment {\n  width: 100%;\n  height: 25px;\n  background-color: #fff;\n  border: #fff solid 2px;\n  color: gray;\n  border-radius: 0;\n  font-weight: 600;\n}\n\n.comment:hover {\n  background-color: lightgray;\n  border: lightgray;\n}\n\n.footer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: -75px;\n}\n\nheader .active {\n  background-color: #000;\n  color: #fff;\n}\n\n.footer p {\n  font-style: italic;\n  color: black;\n}\n\n/* Modal */\n\n#modal-comment {\n  width: 80%;\n  margin: 6% 10% 0;\n  background-color: rgba(240, 144, 18, 0.9);\n  border-radius: 15px;\n}\n\n.modal-wrapper {\n  height: 220vh;\n  margin-top: 50px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.modal-header {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  margin: 24px;\n}\n\n.img-parent {\n  width: 85%;\n  margin: 12px;\n  display: flex;\n  justify-content: center;\n}\n\n.modal-image {\n  width: 800px;\n  height: 500px;\n  margin-left: 35px;\n}\n\n#close {\n  height: 50px;\n  font-size: 50px;\n  font-weight: 700;\n  text-align: right;\n  padding: 0 12px;\n  margin: 0;\n  text-decoration: none;\n  color: black;\n}\n\n#close:hover {\n  border: black solid 2px;\n}\n\n#close:active {\n  background-color: #fff;\n  color: #000;\n  border: black solid 2px;\n}\n\n.name-show {\n  margin: 24px;\n  text-align: center;\n}\n\n.detail {\n  width: 95%;\n  display: flex;\n  justify-content: space-around;\n}\n\n.detail p {\n  margin: 12px;\n  font-weight: 600;\n}\n\n.commnet-header {\n  margin: 24px;\n}\n\n.comment-div {\n  width: 70%;\n  margin: 24px;\n  font-style: italic;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: lightgray;\n  border: gray solid 2px;\n  border-radius: 10px;\n}\n\n.comment-div p {\n  margin: 12px;\n  background-color: rgb(75, 74, 74);\n  color: #fff;\n  padding: 10px;\n  border-radius: 10px;\n}\n\n.form-wrapper {\n  width: 70%;\n}\n\n.form-wrapper h3 {\n  width: 100%;\n  text-align: center;\n  margin: 40px 12px;\n}\n\ninput {\n  width: 200px;\n  height: 25px;\n  padding: 0 5px;\n  border-radius: 5px;\n}\n\ntextarea {\n  padding: 0 5px;\n}\n\n#modal-comment button {\n  width: 120px;\n  height: 30px;\n  background-color: #fff;\n  color: black;\n  font-weight: 600;\n  border-radius: 5px;\n  border: black solid 2px;\n}\n\n#modal-comment button:hover {\n  background-color: gray;\n}\n",""]);const s=i},645:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",a=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),a&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),a&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,a,r,o){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<n.length;l++){var d=[].concat(n[l]);a&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},81:n=>{n.exports=function(n){return n[1]}},379:n=>{var e=[];function t(n){for(var t=-1,a=0;a<e.length;a++)if(e[a].identifier===n){t=a;break}return t}function a(n,a){for(var o={},i=[],s=0;s<n.length;s++){var c=n[s],l=a.base?c[0]+a.base:c[0],d=o[l]||0,m="".concat(l," ").concat(d);o[l]=d+1;var p=t(m),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var h=r(u,a);a.byIndex=s,e.splice(s,0,{identifier:m,updater:h,references:1})}i.push(m)}return i}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var o=a(n=n||[],r=r||{});return function(n){n=n||[];for(var i=0;i<o.length;i++){var s=t(o[i]);e[s].references--}for(var c=a(n,r),l=0;l<o.length;l++){var d=t(o[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=c}}},569:n=>{var e={};n.exports=function(n,t){var a=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}},216:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},565:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},795:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var a="";t.supports&&(a+="@supports (".concat(t.supports,") {")),t.media&&(a+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(a+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),a+=t.css,r&&(a+="}"),t.media&&(a+="}"),t.supports&&(a+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(a,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},589:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},989:(n,e,t)=>{const a=new class{constructor(){this.url=""}getData=async()=>{const n=await fetch(this.url);return await n.json()};setData=async(n=null)=>{try{return(await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).status}catch(n){return n}}},r=new class{constructor(){this.showCounter=0,this.commentCounter=0}countShow(){this.showCounter+=1}countComment(){this.commentCounter+=1}getShowCount(){return this.showCounter}getCommentCount(){return this.commentCounter}clearCommentCounter(){this.commentCounter=0}};let o=!1;var i=t(379),s=t.n(i),c=t(795),l=t.n(c),d=t(569),m=t.n(d),p=t(565),u=t.n(p),h=t(216),g=t.n(h),f=t(589),y=t.n(f),x=t(426),v={};v.styleTagTransform=y(),v.setAttributes=u(),v.insert=m().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=g(),s()(x.Z,v),x.Z&&x.Z.locals&&x.Z.locals;const w=new class{displayItems=async()=>{a.url="https://api.tvmaze.com/shows",(await a.getData()).forEach((n=>{this.createCard(n),r.countShow()}));const n=r.getShowCount();document.getElementById("show").innerHTML=`Shows(${n})`};displayLikes=async(n,e,t)=>{(await n).forEach((n=>{n.item_id===t&&(e.innerHTML=`${n.likes} likes`)}))};commentCounter=async n=>await this.getComment(n);createCard=async n=>{const e={card:["div",["card"],null],cardWrapper:["div",["card-wrapper"],null],showImage:["img",["show-image"],"show-image"],nameLikeParent:["div",["name-like-parent"],null],span:["span",["name"],null],likeParent:["div",["like-parent"],null],like:["a",null,"like"],i:["i",["fa","fa-heart"],null],noOfLikes:["span",["no-of-likes"],null],comment:["button",["comment"],`${n.name}`]},t=this.batchCreateElements(e);t.showImage.src=n.image.medium,t.span.innerHTML=n.name,t.noOfLikes.innerHTML="0 likes",this.likeItem(t.like,n.name);const a=await this.loadLikes();this.displayLikes(a,t.noOfLikes,n.name),t.comment.innerHTML="Comments",t.like.href="";const r=[{child:t.cardWrapper,parent:t.card},{child:t.showImage,parent:t.cardWrapper},{child:t.nameLikeParent,parent:t.cardWrapper},{child:t.span,parent:t.nameLikeParent},{child:t.likeParent,parent:t.nameLikeParent},{child:t.like,parent:t.likeParent},{child:t.i,parent:t.like},{child:t.noOfLikes,parent:t.likeParent},{child:t.comment,parent:t.cardWrapper}];this.batchAppendElements(r,!0),this.showModal(t.comment)};createCommentModal=()=>{document.getElementById("modal-comment").innerHTML='<div class="modal-wrapper">\n        <div class="modal-header">\n            <div class="img-parent">\n                <img src="" alt="Show image" class="modal-image" id ="modal-image">\n            </div>\n            <span><a href="" id="close">&times</a></span>\n        </div>\n        <h2 class="name-show" id="name-show">Name of the show</h2>\n        <div class="detail">\n            <div id="type-status-lang">\n            </div>\n            <div id="gen-prem-end">\n            </div>\n        </div>\n        <div class="comment-div">\n            <h3 class="commnet-header" id="commnet-header">Comments(2)</h3>\n            <div id="commnets">\n            </div>\n        </div>\n        <div class="form-wrapper">\n                <h3>Add a comment</h3>\n                <form action="" method="post" id="frm-comment">\n                    <input type="text" name="uname" id="uname" placeholder="Your name" required>\n                    <br>\n                    <br>\n                    <textarea name="comment" id="comment" cols="50" rows="5"  placeholder="Your insights..." required></textarea>\n                    <br>\n                    <br>\n                    <button type="submit">Comment</button>\n                </form>\n            </div>\n    </div>'};populateModal=async n=>{const e=document.getElementById("type-status-lang"),t=document.getElementById("gen-prem-end"),o=document.getElementById("name-show"),i=document.getElementById("modal-image"),s=document.getElementById("commnet-header");document.getElementById("commnets").innerHTML="",e.innerHTML="",t.innerHTML="";const c=this.batchCreateElements({type:["p",null,null],status:["p",null,null],lang:["p",null,null],genre:["p",null,null],premiere:["p",null,null],end:["p",null,null]});a.url=`https://api.tvmaze.com/search/shows?q=${n}`;const l=await a.getData(),d=[{child:c.type,parent:e},{child:c.status,parent:e},{child:c.lang,parent:e},{child:c.genre,parent:t},{child:c.premiere,parent:t},{child:c.end,parent:t}];this.batchAppendElements(d,!1);const m=l[0].show.name;o.innerHTML=m,i.src=l[0].show.image.medium,c.type.innerHTML=`Type: ${l[0].show.type}`,c.status.innerHTML=`Status: ${l[0].show.status}`,c.lang.innerHTML=`Language: ${l[0].show.language}`,c.genre.innerHTML=`Genres: ${l[0].show.genres.join(", ")}`,c.premiere.innerHTML=`Premiered at: ${l[0].show.premiered}`,c.end.innerHTML=`Ended at: ${l[0].show.ended}`,await this.commentCounter(m);const p=await r.getCommentCount();s.innerHTML=`Comments(${p})`,this.submitComment(m)};likeItem=(n,e)=>{n.addEventListener("click",(async t=>{t.preventDefault(),a.url="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DXeDvMiVvdYqzelJx7jP/likes";const r={item_id:e};if(201===await a.setData(r)){const e=n.parentNode.childNodes[1].innerHTML.split(" ")[0];n.parentNode.childNodes[1].innerHTML=`${Number(e)+1} likes`}}))};loadLikes=async()=>(a.url="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DXeDvMiVvdYqzelJx7jP/likes",await a.getData());addComment=n=>(a.url="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DXeDvMiVvdYqzelJx7jP/comments",a.setData(n));getComment=async n=>{a.url=`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DXeDvMiVvdYqzelJx7jP/comments?item_id=${n}`;let e=await a.getData();return e.error&&e.error.status>210&&(e=null),this.createComments(e),null===e?0:e.length};createComments=n=>{r.clearCommentCounter();const e=document.getElementById("commnets");n&&n.forEach((n=>{const t=document.createElement("p");t.classList.add("user-comment"),t.innerHTML=`${n.creation_date}\t${n.username}: ${n.comment}`,e.appendChild(t),r.countComment()}))};submitComment=n=>{const e=document.getElementById("commnet-header"),t=document.getElementById("frm-comment");t.addEventListener("submit",(async a=>{a.preventDefault();const r=t.elements.uname.value,i=t.elements.comment.value,s={item_id:n,username:r,comment:i},c=new Date,l=c.getDate(),d=c.getMonth(),m={creation_date:`${c.getFullYear()}-${d}-${l}`,username:r,comment:i};201!==await this.addComment(s)||o||(t.elements.uname.value="",t.elements.comment.value="",this.createComments([m]),e.innerHTML=`Comments(${Number(e.innerHTML.charAt(9))+1})`,o=!0)}))};createElement=(n,e,t)=>{const a=document.createElement(n);return e&&e.forEach((n=>{a.classList.add(n)})),t&&(a.id=t),a};appendElement=(n,e)=>{e&&e.appendChild(n)};batchCreateElements=n=>{const e={};return Object.entries(n).forEach((([n,t])=>{e[n]=this.createElement(...t)})),e};batchAppendElements=(n,e)=>{n.forEach((n=>{this.appendElement(n.child,n.parent)})),e&&document.getElementById("parent").appendChild(n[0].parent)};showModal=n=>{const e=document.getElementById("modal-comment");n.addEventListener("click",(()=>(e.showModal(),this.populateModal(n.id),n.id)))};closeModal=()=>{const n=document.getElementById("modal-comment");document.getElementById("close").addEventListener("click",(e=>{e.preventDefault(),n.close()}))}};w.createCommentModal(),w.displayItems(),w.closeModal()}},n=>{n(n.s=989)}]);